# コーヒー豆 価格設定＆収益シミュレーター - 利用ガイド

このアプリケーションは、自家焙煎コーヒー豆の仕入れから販売価格の設定、そして収益予測までをワンストップでシミュレーションするツールです。

## 🚀 アプリケーションの起動方法

ターミナルで以下のコマンドを実行してください。

```bash
# 必要なライブラリのインストール（初回のみ）
pip install -r requirements.txt

# アプリケーションの起動
streamlit run app.py
```

## 💡 主な機能

### 1. 豆情報の入力
最大5種類の豆情報を入力できます。
- **タブ切り替え**: 5つの豆をタブで切り替えて入力します。入力内容は保持されます。
- **仕入れ価格**: 送料などを含めた総額を入力してください。
- **仕入れ重量**: 生豆の状態の重量(kg)を入力してください。
- **目標原価率**: 小売用と卸売用の目標原価率を設定できます。
- **手数料設定**: プラットフォーム手数料(10%)のON/OFFが可能です。

### 2. シミュレーション計算
入力に基づき、自動的に以下の指標を計算します。
- **焙煎後重量**: 生豆から約20%の重量減を考慮します。
- **販売可能袋数**: 100g単位での販売可能数を算出します。
- **推奨販売価格**: 目標原価率に基づき、10円単位で切り上げた価格を提案します。
- **損益分岐点**: コスト回収に必要な「販売袋数」を表示します。

### 3. 表示モードの切り替え
画面下部のタブで表示を切り替えられます。

- **カード表示 (Mobile)**
  スマホで見やすいShadcn風のスタイリッシュなカードデザイン。
  
- **一覧表 (PC)**
  全ての指標を一覧表で確認できます。全体の合計仕入れ額と予測利益も表示されます。

## 📝 計算ロジックについて
- **焙煎ロス**: 20% (歩留まり80%)
- **消費税**: 8% (内税計算)
- **手残利益**: 売上(税込) - 手数料(10%) - 仕入れ(税込)
- **価格丸め**: 10円単位で切り上げ

## 🌍 デプロイ（公開）について
お客様より「GitHubとVercelを使いたい」とのご要望をいただきましたが、技術的な観点から**Streamlit Community Cloud**の利用を強く推奨いたします。

### なぜVercelではないのか？
Streamlitはサーバーとブラウザ間で常時通信（WebSocket）を行うアプリケーションですが、Vercelは「サーバーレス機能」を中心としており、長時間の接続を維持するアプリには不向きです（タイムアウトや接続断が発生します）。

### 推奨の公開手順
GitHubと連携して無料で公開できる公式の **Streamlit Community Cloud** が最適です。

1. **GitHubへアップロード**
   作成されたファイルをGitHubリポジトリにプッシュします。
   ```bash
   git remote add origin https://github.com/[ユーザー名]/[リポジトリ名].git
   git branch -M main
   git push -u origin main
   ```

2. **Streamlit Cloudへデプロイ**
   - [Streamlit Cloud](https://streamlit.io/cloud) にログイン
   - "New app" > GitHubリポジトリを選択
   - Main file path に `app.py` を指定して **Deploy**！

これでWebアプリとして誰でもアクセスできるようになります。

### 🔄 更新について
GitHubの `main` ブランチにコードをプッシュすると、Streamlit Cloudが変更を検知して**自動的にアプリを更新（再デプロイ）**します。
反映されるまで通常1〜2分かかります。


---
作成日: 2026/01/01
